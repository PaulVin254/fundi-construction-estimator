<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Construction Cost Audit - {{ project_title }}</title>
    <style>
        /* ============================================
           MONEY BILL AGGRESSIVE ESTIMATE TEMPLATE
           ERIS Engineering - 2025
           ============================================ */
        
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        @page {
            size: A4;
            margin: 0;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 11pt;
            line-height: 1.5;
            color: #1e293b;
            background: #ffffff;
            position: relative;
            min-height: 100vh;
        }
        
        /* ============================================
           DIAGONAL WATERMARK
           ============================================ */
        .watermark {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 8rem;
            font-weight: 900;
            color: rgba(15, 23, 42, 0.08);
            letter-spacing: 0.5rem;
            white-space: nowrap;
            pointer-events: none;
            z-index: 0;
            user-select: none;
        }
        
        /* ============================================
           NAVY HEADER
           ============================================ */
        .header {
            background: #0f172a;
            color: #ffffff;
            padding: 2rem 2.5rem;
            position: relative;
            z-index: 1;
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .logo {
            height: 48px;
            width: auto;
        }
        
        .company-info {
            text-align: right;
            font-size: 0.75rem;
            color: #94a3b8;
            line-height: 1.6;
        }
        
        .company-info a {
            color: #60a5fa;
            text-decoration: none;
        }
        
        .header-title {
            border-top: 1px solid #334155;
            padding-top: 1.5rem;
        }
        
        .document-type {
            font-size: 0.7rem;
            font-weight: 700;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: #f59e0b;
            margin-bottom: 0.5rem;
        }
        
        .main-title {
            font-size: 2rem;
            font-weight: 900;
            letter-spacing: -0.02em;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
        }
        
        .confidential-badge {
            display: inline-block;
            background: #dc2626;
            color: #ffffff;
            font-size: 0.65rem;
            font-weight: 700;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            padding: 0.35rem 0.75rem;
            border-radius: 2px;
        }
        
        /* ============================================
           PROJECT INFO SECTION
           ============================================ */
        .project-section {
            background: #f8fafc;
            padding: 1.5rem 2.5rem;
            border-bottom: 3px solid #0f172a;
            position: relative;
            z-index: 1;
        }
        
        .project-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }
        
        .info-block {
            
        }
        
        .info-label {
            font-size: 0.65rem;
            font-weight: 700;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: #64748b;
            margin-bottom: 0.25rem;
        }
        
        .info-value {
            font-size: 1rem;
            font-weight: 600;
            color: #0f172a;
        }
        
        .info-value.highlight {
            font-size: 1.25rem;
            font-weight: 800;
            color: #0f172a;
        }
        
        /* ============================================
           COST BREAKDOWN TABLE
           ============================================ */
        .content-section {
            padding: 2rem 2.5rem;
            position: relative;
            z-index: 1;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #0f172a;
        }
        
        .section-title {
            font-size: 0.8rem;
            font-weight: 800;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: #0f172a;
        }
        
        .section-badge {
            font-size: 0.6rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: #64748b;
            background: #e2e8f0;
            padding: 0.25rem 0.5rem;
            border-radius: 2px;
        }
        
        .cost-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
        }
        
        .cost-table thead th {
            background: #0f172a;
            color: #ffffff;
            font-size: 0.65rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            padding: 0.75rem 1rem;
            text-align: left;
        }
        
        .cost-table thead th:last-child {
            text-align: right;
        }
        
        .cost-table tbody tr:nth-child(odd) {
            background: #f8fafc;
        }
        
        .cost-table tbody tr:nth-child(even) {
            background: #ffffff;
        }
        
        .cost-table tbody tr:hover {
            background: #f1f5f9;
        }
        
        .cost-table tbody td {
            padding: 0.875rem 1rem;
            font-size: 0.9rem;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .cost-table tbody td:first-child {
            font-weight: 600;
            color: #1e293b;
        }
        
        .cost-table tbody td:last-child {
            text-align: right;
            font-family: 'SF Mono', 'Consolas', monospace;
            font-weight: 600;
            color: #0f172a;
        }
        
        /* Total Row */
        .cost-table tfoot tr {
            background: #0f172a !important;
        }
        
        .cost-table tfoot td {
            padding: 1rem;
            font-size: 1rem;
            font-weight: 800;
            color: #ffffff;
            border: none;
        }
        
        .cost-table tfoot td:last-child {
            text-align: right;
            font-family: 'SF Mono', 'Consolas', monospace;
            font-size: 1.25rem;
            color: #f59e0b;
        }
        
        /* ============================================
           METRICS CALLOUT BOX
           ============================================ */
        .metrics-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 4px;
            padding: 1.25rem 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1.5rem;
            text-align: center;
        }
        
        .metric-item {
            
        }
        
        .metric-value {
            font-size: 1.5rem;
            font-weight: 900;
            color: #92400e;
            font-family: 'SF Mono', 'Consolas', monospace;
        }
        
        .metric-label {
            font-size: 0.6rem;
            font-weight: 700;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: #92400e;
            margin-top: 0.25rem;
        }
        
        /* ============================================
           RED CTA FOOTER
           ============================================ */
        .cta-footer {
            background: #dc2626;
            color: #ffffff;
            padding: 2rem 2.5rem;
            position: relative;
            z-index: 1;
            margin-top: auto;
        }
        
        .cta-headline {
            font-size: 1.5rem;
            font-weight: 900;
            letter-spacing: -0.01em;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
        }
        
        .cta-subtext {
            font-size: 0.95rem;
            font-weight: 500;
            line-height: 1.6;
            margin-bottom: 1.25rem;
            max-width: 600px;
        }
        
        .cta-contact {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
        }
        
        .cta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .cta-icon {
            width: 20px;
            height: 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
        }
        
        .cta-link {
            color: #ffffff;
            text-decoration: none;
            font-weight: 700;
            font-size: 0.9rem;
        }
        
        .cta-link:hover {
            text-decoration: underline;
        }
        
        /* ============================================
           LEGAL FOOTER
           ============================================ */
        .legal-footer {
            background: #0f172a;
            color: #64748b;
            padding: 1rem 2.5rem;
            font-size: 0.6rem;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }
        
        .legal-text {
            max-width: 800px;
        }
        
        .legal-footer strong {
            color: #94a3b8;
        }
        
        /* ============================================
           PRINT OPTIMIZATIONS
           ============================================ */
        @media print {
            body {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            
            .watermark {
                position: absolute;
            }
            
            .header, .project-section, .content-section, 
            .cta-footer, .legal-footer {
                break-inside: avoid;
            }
        }
        
        /* ============================================
           PAGE LAYOUT WRAPPER
           ============================================ */
        .page-wrapper {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        .content-section {
            flex: 1;
        }
    </style>
</head>
<body>
    <!-- Diagonal Watermark -->
    <div class="watermark">ESTIMATE</div>
    
    <div class="page-wrapper">
        <!-- Navy Header -->
        <header class="header">
            <div class="header-top">
                <div class="logo-section">
                    <img src="https://eris.co.ke/eris-engineering-logo.svg" alt="Eris Engineering" class="logo" onerror="this.style.display='none'">
                </div>
                <div class="company-info">
                    Eris Engineering Ltd<br>
                    Nairobi, Kenya<br>
                    <a href="https://eris.co.ke">eris.co.ke</a> | <a href="mailto:paul@eris.co.ke">paul@eris.co.ke</a>
                </div>
            </div>
            <div class="header-title">
                <div class="document-type">Official Construction Estimate</div>
                <h1 class="main-title">Construction Cost Audit</h1>
                <span class="confidential-badge">Confidential: 2025 Market Rates</span>
            </div>
        </header>
        
        <!-- Project Info Section -->
        <section class="project-section">
            <div class="project-grid">
                <div class="info-block">
                    <div class="info-label">Prepared For</div>
                    <div class="info-value highlight">{{ client_name }}</div>
                </div>
                <div class="info-block">
                    <div class="info-label">Project</div>
                    <div class="info-value highlight">{{ project_title }}</div>
                </div>
                <div class="info-block">
                    <div class="info-label">Date Generated</div>
                    <div class="info-value">{{ generation_date }}</div>
                </div>
                <div class="info-block">
                    <div class="info-label">Estimate Reference</div>
                    <div class="info-value">{{ estimate_reference }}</div>
                </div>
            </div>
        </section>
        
        <!-- Cost Breakdown Section -->
        <section class="content-section">
            <div class="section-header">
                <span class="section-title">Detailed Cost Breakdown</span>
                <span class="section-badge">{{ items|length }} Line Items</span>
            </div>
            
            <table class="cost-table">
                <thead>
                    <tr>
                        <th style="width: 60%">Description</th>
                        <th style="width: 40%">Estimated Cost (KES)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in items %}
                    <tr>
                        <td>{{ item.description }}</td>
                        <td>{{ "{:,.0f}".format(item.cost) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <td>TOTAL ESTIMATED COST</td>
                        <td>KES {{ "{:,.0f}".format(total_cost) }}</td>
                    </tr>
                </tfoot>
            </table>
            
            <!-- Metrics Callout -->
            <div class="metrics-box">
                <div class="metrics-grid">
                    <div class="metric-item">
                        <div class="metric-value">KES {{ "{:,.0f}".format(total_cost) }}</div>
                        <div class="metric-label">Total Investment</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">{{ "{:,.0f}".format(cost_per_sqm) }}/m¬≤</div>
                        <div class="metric-label">Cost Per Square Meter</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">{{ items|length }}</div>
                        <div class="metric-label">Budget Categories</div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Red CTA Footer -->
        <footer class="cta-footer">
            <h2 class="cta-headline">Don't Gamble With Millions</h2>
            <p class="cta-subtext">
                This estimate is AI-generated using 2025 market rates. For a detailed, professionally-reviewed 
                Bill of Quantities with accurate material specifications and labor costs, speak to Eris Engineering.
            </p>
            <div class="cta-contact">
                <div class="cta-item">
                    <span class="cta-icon">üìû</span>
                    <a href="tel:+254717297022" class="cta-link">+254 717 297 022</a>
                </div>
                <div class="cta-item">
                    <span class="cta-icon">‚úâÔ∏è</span>
                    <a href="mailto:paul@eris.co.ke" class="cta-link">paul@eris.co.ke</a>
                </div>
                <div class="cta-item">
                    <span class="cta-icon">üåê</span>
                    <a href="https://eris.co.ke" class="cta-link">eris.co.ke</a>
                </div>
            </div>
        </footer>
        
        <!-- Legal Footer -->
        <div class="legal-footer">
            <p class="legal-text">
                <strong>DISCLAIMER:</strong> This estimate is provided for preliminary budgeting purposes only 
                and does not constitute a formal quotation or contract. Actual costs may vary based on site conditions, 
                material availability, design changes, and market fluctuations. Eris Engineering Ltd accepts no liability 
                for decisions made based on this estimate. For binding quotations, engage a registered quantity surveyor 
                or construction professional. ¬© {{ current_year }} Eris Engineering Ltd. All rights reserved.
            </p>
        </div>
    </div>
</body>
</html>
